<div data-smsgfx-component="paletteEditor">

    <select data-command="paletteSelect" class="form-select d-none">
    </select>

    <div class="sms-toolbox sms-palette card m-0 mb-2">

        <!-- Palette editor : header -->
        <div class="card-header sms-card-toolbar p-0 d-flex">
            <span class="flex-fill p-1 ps-2">Palette</span>
            <button data-command="paletteNew" class="btn btn-ui btn-outline-secondary border border-start border-0"
                title="Create a new palette.">
                <i class="bi bi-plus-lg"></i>
            </button>
            <button data-command="paletteImport" class="btn btn-ui btn-outline-secondary border border-start border-0"
                title="Import a palette from your assembly code.">
                <i class="bi bi-code"></i>
            </button>
            <button class="btn btn-outline-secondary dropdown-toggle btn-ui border border-0 border-start" type="button"
                data-bs-toggle="dropdown" aria-expanded="false" title="Select an existing palette to edit."></button>
            <ul data-linked-command="paletteSelect" class="sms-dropdown-menu dropdown-menu dropdown-menu-end">
            </ul>
        </div>
        <!-- End: Palette editor : header -->

        <div data-smsgfx-id="palette-list-top" data-smsgfx-component-id="palette-list"
            class="palette-list palette-list-above card-body p-0">
            <template>
                <script data-smsgfx-template-id="item-template" type="text/x-handlebars-template">
                    <div class="list-group rounded-0 border border-0">
                        {{#each this}}
                        <button data-command="paletteSelect" data-palette-id="{{paletteId}}" 
                            class="palette-list-item list-group-item border border-0 border-bottom text-start fw-bold">
                            <span class="icon-expand float-end"><i class="bi bi-caret-down-fill"></i></span>
                            <span>{{title}}</span>
                        </button>
                        {{/each}}
                    </div>
                </script>
            </template>
        </div>

        <div class="palette-editor card-body p-2">
            <div class="row mb-2">
                <div class="col">
                    <input data-command="paletteTitle" type="text" class="form-control" aria-label="Enter name"
                        list="tbPaletteSelect" title="Change the title of the palette.">
                </div>
            </div>
            <select data-command="paletteSystem" class="form-select form-select-sm visually-hidden">
                <option value="ms">Master System</option>
                <option value="gg">Game Gear</option>
                <option value="gb">Game Boy</option>
            </select>
            <div data-smsgfx-id="system-select" class="sms-system-select row mb-2">
                <div class="col">
                    <ul class="nav nav-pills nav-fill">
                        <li class="nav-item">
                            <button data-linked-command="paletteSystem" data-value="ms" class="nav-link"
                                title="This Palette is for Sega Master System.">
                                <img src="./assets/image/master-system-console.svg" alt="Sega Master System."
                                    class="sms-console-icon" />
                            </button>
                        </li>
                        <li class="nav-item">
                            <button data-linked-command="paletteSystem" data-value="gg" class="nav-link"
                                title="This palette is for Sega Game Gear.">
                                <img src="./assets/image/game-gear-console.svg" alt="Sega Game Gear."
                                    class="sms-console-icon" />
                            </button>
                        </li>
                        <li class="nav-item">
                            <button data-linked-command="paletteSystem" data-value="gb" class="nav-link visually-hidden"
                                title="This palette is for Nintendo Game Boy.">
                                GB
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- Palette editor : colours -->
            <div class="row">
                <div class="col pt-0 pb-0">
                    <div class="sms-palette-colours table-responsive table-borderless" id="tbPalette">
                        <table class="table table-sm m-0">
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- End: Palette editor : emulate system colours -->
            <div data-smsgfx-id="emulate-system-colours" class="row">
                <div class="col">
                    <div class="form-check form-switch ms-2 mt-2">
                        <input id="displayNativeColours" data-command="displayNativeColours" class="form-check-input"
                            type="checkbox" role="switch" checked
                            title="When enabled the tile set or tile map preview will be rendered in colours that approximate that of the target system.">
                        <label class="form-check-label" for="displayNativeColours"
                            title="When enabled the tile set or tile map preview will be rendered in colours that approximate that of the target system.">
                            Emulate system colours
                        </label>
                    </div>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="paletteClone" class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100"
                        type="button" title="Clones / duplicates this palette.">
                        <i class="bi bi-file-earmark-plus"></i> Clone
                    </button>
                </div>
                <div class="col p-1">
                    <button data-command="paletteDelete" class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100"
                        type="button" title="Deletes this colour palette.">
                        <i class="bi bi bi-trash-fill"></i> Remove
                    </button>
                </div>
            </div>
        </div>

        <div data-smsgfx-id="palette-list-bottom" class="palette-list palette-list-bottom card-body p-0">
            <div class="list-group rounded-0 border border-0">
            </div>
        </div>

    </div>

    <!-- Palette editor context menu -->
    <div data-smsgfx-component-id="palette-editor-context-menu">
    </div>
    <!-- End: Palette editor context menu -->

    <style data-css-scope="global">
        .sms-palette .palette-list .palette-list-item {
            background-color: var(--bs-dark-bg-subtle);
        }

        .sms-palette .palette-list .palette-list-item.selected {
            color: var(--bs-light-text-emphasis);
            background-color: var(--bs-primary-border-subtle);
            border-bottom: none!important;
        }

        .sms-palette .palette-list .palette-list-item .icon-expand {
            display: block;
        }

        .sms-palette .palette-list .palette-list-item .icon-expanded {
            display: none;
        }

        .sms-palette .palette-list .palette-list-item.selected .icon-expand {
            display: none;
        }

        .sms-palette .palette-list .palette-list-item.selected .icon-expanded {
            display: block;
        }

        .sms-palette .palette-list.palette-list-bottom button {
            border-top: var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important;
            border-bottom: none!important;
        }

        .sms-palette .palette-list.palette-list-bottom button:last-of-type {
            border-bottom-left-radius: var(--bs-card-border-radius);
            border-bottom-right-radius: var(--bs-card-border-radius);
        }

        .sms-palette .palette-editor {
            background: linear-gradient(180deg, var(--bs-primary-border-subtle) 0%, rgba(33,37,41,0) 40%);
        }

        .sms-palette .sms-palette-colours td {
            border: none;
        }

        .sms-palette .sms-palette-colours button.sms-palette-button {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 45px;
            border-radius: 5px;
            border: 1px solid #6c757d;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        .sms-palette .sms-palette-colours button.sms-palette-button span {
            text-align: center;
            background-color: rgba(0, 0, 0, 0.75);
            color: #FFFFFF;
            font-size: 10px;
            font-weight: bold;
            border: none;
            box-sizing: border-box;
            padding: 0;
            width: 100%;
        }

        .sms-palette .sms-palette-colours td.sms-selected button.sms-palette-button {
            border-color: #0d6efd;
            box-shadow: 0px 0px 0px 1px #0d6efd;
        }

        .sms-palette .sms-palette-colours td.sms-selected button.sms-palette-button span {
            background-color: #0d6efd;
        }

        .sms-palette .sms-system-select button:not(.active) {
            background-color: transparent;
        }

        [data-bs-theme=dark] .sms-palette .sms-system-select button:not(.active) {
            background-color: transparent;
        }

        .sms-palette .sms-palette-colours td.sms-highlight button {
            box-shadow: 0px 0px 0px 3px #AAAAAA;
        }

        [data-bs-theme=dark] .sms-palette .sms-palette-colours td.sms-highlight button {
            box-shadow: 0px 0px 0px 3px #FFFFFF;
        }

        .sms-palette .sms-console-icon {
            width: 60px;
            height: auto;
        }
    </style>
</div>