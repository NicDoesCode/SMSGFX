<div data-smsgfx-component="tileManager" class="sms-tile-manager d-flex flex-column h-100">
    <select data-command="tileMapSelect" data-auto-event="change" class="form-select d-none">
    </select>

    <div class="sms-toolbox card mb-2">
        <div class="card-header sms-card-toolbar p-0 d-flex">
            <span class="flex-fill p-1 ps-2">Tile map</span>
            <button data-command="tileMapNew" data-auto-event="click"
                class="btn btn-ui btn-outline-secondary border border-start border-0" title="Create a new tile map.">
                <i class="bi bi-plus-lg"></i>
            </button>
            <button class="btn btn-outline-secondary dropdown-toggle btn-ui border border-0 border-start" type="button"
                data-bs-toggle="dropdown" aria-expanded="false" title="Select a tile map."></button>
            <ul data-smsgfx-id="tileMapSelectDropDown" class="dropdown-menu">
            </ul>
        </div>
        <div class="card-body p-2 visually-hidden" data-smsgfx-id="tileSetProperties">
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <p class="m-0 mb-1">
                        <small>The tile set is currently selected, these are the raw tiles that compose
                            your tile maps.</small>
                    </p>
                    <p class="m-0 mb-1">
                        <small>Changes made to tiles here will affect any tile set that uses them.</small>
                    </p>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="tileSetToTileMap" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Removes the tile map from the project.">
                        <i class="bi bi bi-plus-lg"></i> Convert to tile map
                    </button>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="tileMapNew" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Removes the tile map from the project.">
                        <i class="bi bi-plus-lg"></i> Create blank tile map
                    </button>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <label class="form-label">Display tile width</label>
                    <input data-smsgfx-id="tileSetTileWidth" data-command="tileSetChange" data-field="tileWidth"
                        data-auto-event="change" type="number" class="form-control form-control-sm"
                        title="Sets how many tiles to display per line in the tile editor.">
                </div>
            </div>
        </div>
        <div class="card-body p-2 visually-hidden" data-smsgfx-id="tileMapProperties">
            <div class="row mb-2">
                <div class="col">
                    <input data-command="tileMapChange" data-auto-event="change" data-field="title" type="text"
                        class="form-control" aria-label="Enter name">
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="mb-1">Palette slots</p>
                </div>
            </div>
            <div class="row">
                <div data-smsgfx-id="palette-selectors" class="col">
                </div>
                <script data-smsgfx-template-id="palette-selector-template" type="text/x-handlebars-template">
                    {{#each this}}
                        <div data-smsgfx-id="palette-selector" class="sms-palette-selector d-flex flex-column border rounded mb-2">
                            <div class="d-flex flex-row align-items-stretch p-0 m-0 border-bottom">
                                <div class="col-2 p-0 m-0 text-center align-content-center border-end p-1">
                                    {{slotNumber}}
                                </div>
                                <div class="col p-0 m-0">
                                    <select data-command="tileMapChange" data-auto-event="change" data-field="paletteId" data-palette-slot="{{slotNumber}}" class="form-select border border-0">
                                    </select>
                                </div>
                            </div>
                            <div data-smsgfx-id="palette-colours" data-palette-slot="{{slotNumber}}" class="sms-colours d-flex p-2">
                            </div>
                        </div>
                    {{/each}}
                </script>
            </div>
            <div data-smsgfx-id="tile-map-optimise" class="row">
                <div class="col">
                    <div class="form-check form-switch">
                        <input id="tileSetOptimise" data-command="tileMapChange" data-auto-event="change"
                            data-field="optimise" class="form-check-input" type="checkbox" role="switch" checked>
                        <label class="form-check-label" for="tileSetOptimise">
                            Optimise on export
                        </label>
                    </div>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="tileMapClone" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Creates a clone of this tile map.">
                        <i class="bi bi-file-earmark-plus"></i> Clone
                    </button>
                </div>
                <div class="col p-1">
                    <button data-command="tileMapDelete" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Removes the tile map from the project.">
                        <i class="bi bi bi-trash-fill"></i> Remove
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="sms-toolbox card flex-fill">
        <div class="card-header sms-card-toolbar p-0">
            <p class="flex-fill p-1 ps-2 m-0">Tile palette</p>
        </div>
        <div class="card-body p-0">
            <div data-smsgfx-component-id="tile-set-list" class="sms-tile-manager-tiles position-absolute top-0 start-0 bottom-0 end-0 p-2 overflow-scroll">
            </div>
        </div>
    </div>

    <div data-toolstrip="tileAdd" class="col-auto m-0 mt-2 me-2 p-0 invisible">
        <div class="input-group input-group-sm">
            <span class="input-group-text border border-0">&nbsp;</span>
        </div>
    </div>

    <style data-css-scope="global">
        .sms-tile-manager .sms-tile-manager-tiles {
            margin-top: 30px;
        }

        .sms-tile-manager .sms-palette-display .sms-palette-display-colours {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        .sms-tile-manager .sms-palette-display .sms-palette-display-colours div {
            width: 12.5%;
            min-height: 10px;
        }


        .sms-tile-manager .sms-palette-selector .sms-colours {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        .sms-tile-manager .sms-palette-selector .sms-colours div {
            width: 12.5%;
            min-height: 10px;
        }
    </style>

</div>