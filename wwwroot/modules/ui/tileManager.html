<div data-smsgfx-component="tileManager" class="sms-tile-manager">

    <div class="sms-toolbox input-group input-group-sm mb-2 rounded-top">
        <span class="input-group-text form-control">Tile map</span>
        <button data-command="tileMapNew" data-auto-event="click" class="btn btn-outline-secondary btn-ui"
            title="Create a new tile map.">
            <i class="bi bi-plus-lg"></i>
        </button>
    </div>

    <div class="sms-toolbox card mb-2">
        <div class="card-header p-0">
            <select data-command="tileMapSelect" data-auto-event="change" class="form-select d-none">
            </select>
            <div class="input-group input-group-sm">
                <input data-command="tileMapChange" data-auto-event="change" data-field="title" type="text"
                    class="form-control border border-0" aria-label="Enter name">
                <button class="btn btn-outline-secondary btn-ui dropdown-toggle border-0 border-start"
                    data-bs-toggle="dropdown" title="Select a tile set."></button>
                <ul data-smsgfx-id="tileMapSelectDropDown" class="dropdown-menu">
                </ul>
            </div>
        </div>
        <div class="card-body p-2 visually-hidden" data-smsgfx-id="tileSetProperties">
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <p class="m-0 mb-1">
                        <small>The tile set is currently selected, these are the raw tiles that compose
                            your tile maps.</small>
                    </p>
                    <p class="m-0 mb-1">
                        <small>Changes made to tiles here will affect any tile set that uses them.</small>
                    </p>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="tileSetToTileMap" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Removes the tile map from the project.">
                        <i class="bi bi bi-plus-lg"></i> Convert to tile map
                    </button>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="tileMapNew" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Removes the tile map from the project.">
                        <i class="bi bi-plus-lg"></i> Create blank tile map
                    </button>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <label class="form-label">Display tile width</label>
                    <input data-smsgfx-id="tileSetTileWidth" data-command="tileSetChange" data-field="tileWidth" data-auto-event="change" type="number" class="form-control form-control-sm"
                        title="Sets how many tiles to display per line in the tile editor.">
                </div>
            </div>
        </div>
        <div class="card-body p-2 visually-hidden" data-smsgfx-id="tileMapProperties">
            <div class="row">
                <div class="col">
                    <p class="mb-1">Palette slots</p>
                </div>
            </div>
            <div class="row">
                <div data-smsgfx-id="palette-selectors" class="col">
                </div>
                <script data-smsgfx-id="palette-selector-template" type="text/x-handlebars-template">
                    {{#each this}}
                        <div data-smsgfx-id="palette-selector" class="sms-palette-selector d-flex flex-column border rounded mb-2">
                            <div class="d-flex flex-row align-items-stretch p-0 m-0 border-bottom">
                                <div class="col-2 p-0 m-0 text-center align-content-center border-end p-1">
                                    {{slotNumber}}
                                </div>
                                <div class="col p-0 m-0">
                                    <select data-command="tileMapChange" data-auto-event="change" data-field="paletteId" data-palette-slot="{{slotNumber}}" class="form-select border border-0">
                                    </select>
                                </div>
                            </div>
                            <div data-smsgfx-id="palette-colours" data-palette-slot="{{slotNumber}}" class="sms-colours d-flex p-2">
                            </div>
                        </div>
                    {{/each}}
                </script>
            </div>
            <div data-smsgfx-id="tile-map-optimise" class="row">
                <div class="col">
                    <div class="form-check form-switch">
                        <input id="tileSetOptimise" data-command="tileMapChange" data-auto-event="change"
                            data-field="optimise" class="form-check-input" type="checkbox" role="switch" checked>
                        <label class="form-check-label" for="tileSetOptimise">
                            Optimise on export
                        </label>
                    </div>
                </div>
            </div>
            <div class="row mt-1 mb-0 ps-3 pe-3">
                <div class="col p-1">
                    <button data-command="tileMapClone" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Creates a clone of this tile map.">
                        <i class="bi bi-file-earmark-plus"></i> Clone
                    </button>
                </div>
                <div class="col p-1">
                    <button data-command="tileMapDelete" data-auto-event="click"
                        class="btn btn-sm btn-outline-secondary btn-ui m-0 w-100" type="button"
                        title="Removes the tile map from the project.">
                        <i class="bi bi bi-trash-fill"></i> Remove
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            Tile palette
        </div>
        <div class="card-body p-0">
            <div data-smsgfx-component-id="tile-set-list">
            </div>
        </div>
    </div>

    <style data-css-scope="global">
        .sms-tile-manager .sms-palette-display .sms-palette-display-colours {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        .sms-tile-manager .sms-palette-display .sms-palette-display-colours div {
            width: 12.5%;
            min-height: 10px;
        }


        .sms-tile-manager .sms-palette-selector .sms-colours {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        .sms-tile-manager .sms-palette-selector .sms-colours div {
            width: 12.5%;
            min-height: 10px;
        }
    </style>

</div>